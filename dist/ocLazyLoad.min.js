/**
 * oclazyload - Load modules on demand (lazy load) with angularJS
 * @version v0.3.9
 * @link https://github.com/ocombe/ocLazyLoad
 * @license MIT
 * @author Olivier Combe <olivier.combe@gmail.com>
 */
!(function(){"use strict";function o(t){var n=[];angular.forEach(t.requires,function(t){if(e.indexOf(t)===-1){n.push(t)}});return n}function u(e){try{return angular.module(e)}catch(t){if(/No module/.test(t)||t.message.indexOf("$injector:nomod")>-1){return false}}}function a(e){try{return angular.module(e)}catch(t){if(/No module/.test(t)||t.message.indexOf("$injector:nomod")>-1){t.message='The module "'+e+'" that you are trying to load does not exist. '+t.message}throw t}}function f(e,t,r,i){if(!t){return}var s,o,u,a;for(s=0,o=t.length;s<o;s++){u=t[s];if(angular.isArray(u)){if(e!==null){if(e.hasOwnProperty(u[0])){a=e[u[0]]}else{throw new Error("unsupported provider "+u[0])}}var f=c(u,r);if(u[1]!=="invoke"){if(f&&angular.isDefined(a)){a[u[1]].apply(a,u[2])}}else{var l=function(e){var t=n.indexOf(r+"-"+e);if(t===-1||i){if(t===-1){n.push(r+"-"+e)}if(angular.isDefined(a)){a[u[1]].apply(a,u[2])}}};if(angular.isFunction(u[2][0])){l(u[2][0])}else if(angular.isArray(u[2][0])){for(var h=0,p=u[2][0].length;h<p;h++){if(angular.isFunction(u[2][0][h])){l(u[2][0][h])}}}}}}}function l(t,n,i){if(n){var o,u,a,c=[];for(o=n.length-1;o>=0;o--){u=n[o];if(typeof u!=="string"){u=h(u)}if(!u||r.indexOf(u)!==-1){continue}var p=e.indexOf(u)===-1;a=angular.module(u);if(p){e.push(u);l(t,a.requires,i);c=c.concat(a._runBlocks)}f(t,a._invokeQueue,u,i.reconfig);f(t,a._configBlocks,u,i.reconfig);s(p?"ocLazyLoad.moduleLoaded":"ocLazyLoad.moduleReloaded",u);n.pop();r.push(u)}var d=t.getInstanceInjector();angular.forEach(c,function(e){d.invoke(e)})}}function c(e,n){var r=e[2][0],i=e[1],o=false;if(angular.isUndefined(t[n])){t[n]={}}if(angular.isUndefined(t[n][i])){t[n][i]=[]}var u=function(e){o=true;t[n][i].push(e);s("ocLazyLoad.componentLoaded",[n,i,e])};if(angular.isString(r)&&t[n][i].indexOf(r)===-1){u(r)}else if(angular.isObject(r)){angular.forEach(r,function(e){if(angular.isString(e)&&t[n][i].indexOf(e)===-1){u(e)}})}else{return true}return o}function h(e){if(e===null){return null}var t=null;if(typeof e==="string"){t=e}else if(typeof e==="object"&&e.hasOwnProperty("name")&&typeof e.name==="string"){t=e.name}return t}function p(t){function u(e){return e&&n.push(e)}var n=[t],r,i,s=["ng:app","ng-app","x-ng-app","data-ng-app"],o=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;angular.forEach(s,function(e){s[e]=true;u(document.getElementById(e));e=e.replace(":","\\:");if(t[0].querySelectorAll){angular.forEach(t[0].querySelectorAll("."+e),u);angular.forEach(t[0].querySelectorAll("."+e+"\\:"),u);angular.forEach(t[0].querySelectorAll("["+e+"]"),u)}});angular.forEach(n,function(e){if(!r){var n=" "+t.className+" ";var u=o.exec(n);if(u){r=e;i=(u[2]||"").replace(/\s+/g,",")}else{angular.forEach(e.attributes,function(t){if(!r&&s[t.name]){r=e;i=t.value}})}}});if(r){(function a(t){if(e.indexOf(t)===-1){e.push(t);var n=angular.module(t);f(null,n._invokeQueue,t);f(null,n._configBlocks,t);angular.forEach(n.requires,a)}})(i)}}var e=["ng"],t={},n=[],r=[],i=angular.module("oc.lazyLoad",["ng"]),s=angular.noop;i.provider("$ocLazyLoad",["$controllerProvider","$provide","$compileProvider","$filterProvider","$injector","$animateProvider",function(t,n,i,f,c,d){var v={},m={$controllerProvider:t,$compileProvider:i,$filterProvider:f,$provide:n,$injector:c,$animateProvider:d},g=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],y,b,w,E=false,S=false;p(angular.element(window.document));this.$get=["$timeout","$log","$q","$templateCache","$http","$rootElement","$rootScope","$cacheFactory",function(t,n,i,f,c,p,d,x){var T,N=x("ocLazyLoad");if(!E){n={};n["error"]=angular.noop;n["warn"]=angular.noop;n["info"]=angular.noop}m.getInstanceInjector=function(){return T?T:T=p.data("$injector")};s=function(t,r){if(S){d.$broadcast(t,r)}if(E){n.info(t,r)}};var C=function(t,n,r){var o=i.defer(),u,a,f=function(t){var n=(new Date).getTime();if(t.indexOf("?")>=0){if(t.substring(0,t.length-1)==="&"){return t+"_dc="+n}return t+"&_dc="+n}else{return t+"?_dc="+n}};if(angular.isUndefined(N.get(n))){N.put(n,o.promise)}switch(t){case"css":u=document.createElement("link");u.type="text/css";u.rel="stylesheet";u.href=r.cache===false?f(n):n;break;case"js":u=document.createElement("script");u.src=r.cache===false?f(n):n;break;default:o.reject(new Error('Requested type "'+t+'" is not known. Could not inject "'+n+'"'));break}u.onload=u["onreadystatechange"]=function(e){if(u["readyState"]&&!/^c|loade/.test(u["readyState"])||a)return;u.onload=u["onreadystatechange"]=null;a=1;s("ocLazyLoad.fileLoaded",n);o.resolve()};u.onerror=function(e){o.reject(new Error("Unable to load "+n))};u.async=1;g.insertBefore(u,g.lastChild);if(t=="css"){var l=navigator.userAgent.toLowerCase();var c=false;if(/iP(hone|od|ad)/.test(navigator.platform)){var h=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);var p=parseFloat([parseInt(h[1],10),parseInt(h[2],10),parseInt(h[3]||0,10)].join("."));c=p<6}if(!c){if(l.indexOf("android")>-1){var d=parseFloat(l.slice(l.indexOf("android")+8));c=d<4.4}}if(!c){if(l.indexOf("safari")>-1&&l.indexOf("chrome")==-1){var v=parseFloat(l.match(/version\/([\.\d]+)/i)[1]);c=v<6}}if(c){var m=500;var y=function b(){try{u.sheet.cssRules}catch(e){m--;if(m<=0){u.onload=u["onreadystatechange"]=u.onerror=null;o.reject(new Error("Timeout: "+n))}else{setTimeout(b,20)}return}u.onload()};y()}}return o.promise};if(angular.isUndefined(y)){y=function(e,t,n){var r=[];angular.forEach(e,function(t){r.push(C("js",t,n))});i.all(r).then(function(){t()},function(n){t(n)})};y.ocLazyLoadLoader=true}if(angular.isUndefined(b)){b=function(e,t,n){var r=[];angular.forEach(e,function(t){r.push(C("css",t,n))});i.all(r).then(function(){t()},function(n){t(n)})};b.ocLazyLoadLoader=true}if(angular.isUndefined(w)){w=function(e,t,r){if(angular.isString(e)){e=[e]}var s=[];angular.forEach(e,function(e){var t=i.defer();s.push(t.promise);c.get(e,r).success(function(n){angular.forEach(angular.element(n),function(e){if(e.nodeName==="SCRIPT"&&e.type==="text/ng-template"){f.put(e.id,e.innerHTML)}});if(angular.isUndefined(N.get(e))){N.put(e,true)}t.resolve()}).error(function(r){var i='Error load template "'+e+'": '+r;n.error(i);t.reject(new Error(i))})});return i.all(s).then(function(){t()},function(n){t(n)})};w.ocLazyLoadLoader=true}var k=function(e,t){var r=[],s=[],o=[],u=[],a=null;angular.extend(t||{},e);angular.forEach(t.files,function(e){a=N.get(e);if(angular.isUndefined(a)||t.cache===false){if(/\.css[^\.]*$/.test(e)&&r.indexOf(e)===-1){r.push(e)}else if(/\.(htm|html)[^\.]*$/.test(e)&&s.indexOf(e)===-1){s.push(e)}else if(o.indexOf(e)===-1){o.push(e)}}else if(a){u.push(a)}});if(r.length>0){var f=i.defer();b(r,function(e){if(angular.isDefined(e)&&b.hasOwnProperty("ocLazyLoadLoader")){n.error(e);f.reject(e)}else{f.resolve()}},t);u.push(f.promise)}if(s.length>0){var l=i.defer();w(s,function(e){if(angular.isDefined(e)&&w.hasOwnProperty("ocLazyLoadLoader")){n.error(e);l.reject(e)}else{l.resolve()}},t);u.push(l.promise)}if(o.length>0){var c=i.defer();y(o,function(e){if(angular.isDefined(e)&&y.hasOwnProperty("ocLazyLoadLoader")){n.error(e);c.reject(e)}else{c.resolve()}},t);u.push(c.promise)}return i.all(u)};return{getModuleConfig:function(e){if(!v[e]){return null}return v[e]},setModuleConfig:function(e){v[e.name]=e;return e},getModules:function(){return e},loadTemplateFile:function(e,t){return k({files:e},t)},load:function(s,f){var c=this,p=null,d=[],v=[],g=i.defer(),y,b;if(angular.isUndefined(f)){f={}}if(angular.isArray(s)){angular.forEach(s,function(e){if(e){v.push(c.load(e,f))}});i.all(v).then(function(){g.resolve(s)},function(t){g.reject(t)});return g.promise}y=h(s);if(typeof s==="string"){p=c.getModuleConfig(s);if(!p){p={files:[s]};y=null}}else if(typeof s==="object"){p=c.setModuleConfig(s)}if(p===null){b='Module "'+y+'" is not configured, cannot load.';n.error(b);g.reject(new Error(b))}else{if(angular.isDefined(p.template)){if(angular.isUndefined(p.files)){p.files=[]}if(angular.isString(p.template)){p.files.push(p.template)}else if(angular.isArray(p.template)){p.files.concat(p.template)}}}d.push=function(e){if(this.indexOf(e)===-1){Array.prototype.push.apply(this,arguments)}};if(angular.isDefined(y)&&u(y)&&e.indexOf(y)!==-1){d.push(y);if(angular.isUndefined(p.files)){g.resolve();return g.promise}}var w=function E(e){var t,r,s,l,p=[];t=h(e);if(t===null){return i.when()}else{try{r=a(t)}catch(v){var m=i.defer();n.error(v.message);m.reject(v);return m.promise}s=o(r)}angular.forEach(s,function(r){if(typeof r==="string"){var i=c.getModuleConfig(r);if(i===null){d.push(r);return}r=i}if(u(r.name)){if(typeof e!=="string"){l=r.files.filter(function(e){return c.getModuleConfig(r.name).files.indexOf(e)<0});if(l.length!==0){n.warn('Module "',t,'" attempted to redefine configuration for dependency. "',r.name,'"\n Additional Files Loaded:',l)}p.push(k(r.files,f).then(function(){return E(r)}))}return}else if(typeof r==="object"){if(r.hasOwnProperty("name")&&r["name"]){c.setModuleConfig(r);d.push(r["name"])}if(r.hasOwnProperty("css")&&r["css"].length!==0){angular.forEach(r["css"],function(e){C("css",e,f)})}}if(r.hasOwnProperty("files")&&r.files.length!==0){if(r.files){p.push(k(r,f).then(function(){return E(r)}))}}});return i.all(p)};k(p,f).then(function(){if(y===null){g.resolve(s)}else{d.push(y);w(y).then(function(){try{r=[];l(m,d,f)}catch(i){n.error(i.message);g.reject(i);return}t(function(){g.resolve(s)})},function(n){t(function(){g.reject(n)})})}},function(t){g.reject(t)});return g.promise}}}];this.config=function(t){if(angular.isDefined(t.jsLoader)||angular.isDefined(t.asyncLoader)){y=t.jsLoader||t.asyncLoader;if(!angular.isFunction(y)){throw"The js loader needs to be a function"}}if(angular.isDefined(t.cssLoader)){b=t.cssLoader;if(!angular.isFunction(b)){throw"The css loader needs to be a function"}}if(angular.isDefined(t.templatesLoader)){w=t.templatesLoader;if(!angular.isFunction(w)){throw"The template loader needs to be a function"}}if(angular.isDefined(t.loadedModules)){var n=function(t){if(e.indexOf(t)<0){e.push(t);angular.forEach(angular.module(t).requires,n)}};angular.forEach(t.loadedModules,n)}if(angular.isDefined(t.modules)){if(angular.isArray(t.modules)){angular.forEach(t.modules,function(e){v[e.name]=e})}else{v[t.modules.name]=t.modules}}if(angular.isDefined(t.debug)){E=t.debug}if(angular.isDefined(t.events)){S=t.events}}}]);i.directive("ocLazyLoad",["$http","$log","$ocLazyLoad","$compile","$timeout","$templateCache","$animate",function(e,t,n,r,i,s,o){return{restrict:"A",terminal:true,priority:401,transclude:"element",controller:angular.noop,compile:function(r,i){return function(r,i,u,a,f){function p(){if(l){l.$destroy();l=null}i.html("")}function d(n,r){var i;if(typeof (i=s.get(n))!=="undefined"){r(i)}else{e.get(n).success(function(e){s.put("view:"+n,e);r(e)}).error(function(e){t.error('Error load template "'+n+'": '+e)})}}var l,c=r.$eval(u.ocLazyLoad),h=c&&c.onload?c.onload:"";r.$watch(u.ocLazyLoad,function(e){if(angular.isDefined(e)){n.load(e).then(function(e){f(r,function(t){o.enter(t,null,i)})})}else{p()}},true)}}}}]);if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e,t){var n;if(this==null){throw new TypeError('"this" is null or not defined')}var r=Object(this);var i=r.length>>>0;if(i===0){return-1}var s=+t||0;if(Math.abs(s)===Infinity){s=0}if(s>=i){return-1}n=Math.max(s>=0?s:i-Math.abs(s),0);while(n<i){if(n in r&&r[n]===e){return n}n++}return-1}}})();